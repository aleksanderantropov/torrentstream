<html>
<head>
    <title>Player</title>
    <meta charset='utf-8'>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@canary"></script>
</head>
<body>
    <div id="container"></div>
    <script>
        fetch('/check')
        .then(response => response.json())
        .then(result => {
            console.log(result);
            const path = "http://localhost/" + result.path;
            container.insertAdjacentHTML('afterBegin', "<video id='video' controls width='640' height='360'> <track src='" + path + result.subtitles + "' label='English' > </video>" );
            const video = document.getElementById("video");
            const hls = new Hls();
            hls.loadSource(path + result.master);
            hls.attachMedia(video);
            hls.on(Hls.Events.ERROR, (event, data) => console.log(event, data));
        });
    </script>
</body>
</html>